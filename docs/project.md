# Bacula 백업 리포트 시스템 - PRD

## 1. 프로젝트 개요
**목적**: Bacula API로 백업 현황 조회 → HTML 리포트 자동 생성  
**현재 범위**: API 조회 + HTML 생성 (메일 발송은 추후)

---

## 2. 기술 환경
- **OS**: Rocky Linux 9.6
- **Python**: 3.12
- **Python 환경**: .venv
- **필수 라이브러리**: requests, jinja2, python-dotenv, flake8
- **형상관리**: git

---

## 3. 입력 및 설정

### 3.1 API 인증 정보
- `.env` 파일에 API 접속 정보 저장됨
- `test.py`에 API 호출 예시 있음 (참고용)

### 3.2 API 문서
- **Bacula REST API**: https://bacula.org/downloads/baculum/baculum-api-v1

### 3.3 조회 기간
- **테스트**: 1주일 전 ~ 현재
- **프로덕션**: 전일 22시 ~ 실행 시점

---

## 4. 출력 요구사항

### 4.1 파일명
`mail_YYYYMMDDHHMMSS.html`

### 4.2 리포트 내용
**필수 포함 항목**:
1. **백업 현황 요약**
   - 전체 서버 수
   - 성공 건수
   - 실패 건수
   - 진행중 건수

2. **성공한 백업 목록**
   - 서버명, 완료시간, 백업 크기 등

3. **실패한 백업 상세** ⚠️
   - 서버명, 실패시간
   - **에러 로그 표시** (중요)

4. **진행 중인 백업**
   - 서버명, 시작시간

---

## 5. 성능 요구사항
| 항목 | 기준 |
|------|------|
| API 응답 시간 | 10초 이하 |
| 오류율 | 0.1% 이하 |

---

## 6. 제약사항
- .env 파일은 git에 커밋 금지
- API 연결 실패 시 재시도 필요
- 실패한 백업의 에러 로그는 반드시 표시
- flake8 코드컨벤션 규칙 준수

---

## 7. 참고 자료
- `test.py`: API 호출 방식 참고
- `.env`: API 접속 정보
- Bacula 공식 API 레퍼런스 (상기 URL 참조)

---